server:
  port: ${SERVER_PORT:8081}

spring:
  application:
    name: nexia-core

  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/nexia}
    username: ${SPRING_DATASOURCE_USERNAME:nexia}
    password: ${SPRING_DATASOURCE_PASSWORD:nexia}

  jpa:
    hibernate:
      ddl-auto: ${SPRING_JPA_HIBERNATE_DDL_AUTO:validate}
    properties:
      hibernate:
        format_sql: true

  flyway:
    enabled: ${SPRING_FLYWAY_ENABLED:true}
    locations: ${SPRING_FLYWAY_LOCATIONS:classpath:db/migration}

  rabbitmq:
    host: ${SPRING_RABBITMQ_HOST:localhost}
    port: ${SPRING_RABBITMQ_PORT:5672}
    username: ${SPRING_RABBITMQ_USERNAME:nexia}
    password: ${SPRING_RABBITMQ_PASSWORD:nexia}

management:
  endpoints:
    web:
      base-path: /actuator
      exposure:
        include: health,info,prometheus,mappings

    # Spring Boot 3.4+ endpoint access defaults
    access:
      default: none
      max-permitted: unrestricted

  endpoint:
    health:
      access: unrestricted
      probes:
        enabled: true
      show-details: always

    info:
      access: unrestricted

    prometheus:
      access: unrestricted

    mappings:
      access: unrestricted

  metrics:
    tags:
      application: ${spring.application.name}

  tracing:
    sampling:
      probability: 1.0

nexia:
  security:
    jwt:
      secret: ${NEXIA_SECURITY_JWT_SECRET:${NEXIA_JWT_SECRET:change-me-change-me-change-me-change-me}}
  jwt:
    ttl-seconds: ${NEXIA_JWT_TTL_SECONDS:3600}


